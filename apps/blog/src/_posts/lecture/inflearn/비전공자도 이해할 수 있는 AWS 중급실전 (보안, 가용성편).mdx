---
title: "비전공자도 이해할 수 있는 AWS 중급실전 (보안, 가용성편)"
description: "VPC, NAT 게이트웨이, 인터넷 게이트웨이, 서브넷, 라우팅 테이블, 베스천 호스트의 개념과 실제 구성 방법을 상세히 알아보세요."
tags: [aws, vpc, network, nat-gateway, internet-gateway, subnet, routing-table, bastion-host, 클라우드, 인프라]
icon: ""
thumbnail: ""
createdAt: 2025-09-05 12:52:00
publishedAt: 2025-09-05 12:52:00
sitemap:
  lastmod: 2025-09-05 12:52:00
  changefreq: weekly
  priority: 0.8
draft: true
---

## 🏠 VPC (Virtual Private Cloud)
VPC는 AWS 클라우드 내에서 사용자가 정의한 논리적으로 격리된 가상 네트워크예요. 마치 자신만의 데이터 센터를 클라우드에 구축하는 것과 같다고 생각하시면 돼요.<br />
VPC를 통해 완전히 제어 가능한 네트워크 환경을 구축할 수 있어요.

### 0️⃣ VPC의 핵심 개념
VPC를 통해 IP 주소 범위, 서브넷, 라우팅 테이블, 게이트웨이 등을 직접 설정하여 네트워크를 완전히 제어할 수 있어요.<br />
이를 통해 클라우드 환경에서도 온프레미스와 같은 수준의 네트워크 보안과 격리를 구현할 수 있어요.<br />
각 VPC는 다른 VPC와 완전히 분리되어 있어 보안성이 높아요.

### 1️⃣ CIDR 블록 설정
VPC를 생성할 때 가장 중요한 것은 CIDR 블록을 설정하는 것이에요.<br />
예를 들어 `10.10.0.0/21`과 같이 설정하면 해당 IP 범위 내에서 서브넷을 나누어 사용할 수 있어요.<br />
CIDR 블록 설정 시 향후 확장을 고려하여 충분한 IP 주소 공간을 확보하는 것이 중요해요.

*[이미지 필요: VPC 생성 화면과 CIDR 설정 부분]*

### 2️⃣ VPC의 주요 특징
- **논리적 격리**: 각 VPC는 다른 VPC와 완전히 분리되어 있어 보안성이 높아요
- **완전한 네트워크 제어**: IP 주소 범위부터 라우팅까지 모든 것을 사용자가 설정
- **보안 격리**: 다른 AWS 계정이나 인터넷으로부터 완전히 격리된 환경 제공
- **확장성 및 유연성**: 필요에 따라 서브넷을 추가하고 네트워크를 확장 가능
- **하이브리드 연결**: VPN이나 Direct Connect를 통해 온프레미스와 연결 가능

### 3️⃣ VPC의 구성 요소
- **서브넷**: VPC 내에서 IP 주소 범위를 나누어 서브넷을 생성할 수 있어요
- **라우팅 테이블**: 네트워크 트래픽의 경로를 정의하는 테이블로, 각 서브넷에 연결되어 있어요
- **인터넷 게이트웨이**: VPC와 인터넷 간의 통신을 가능하게 해주는 게이트웨이예요
- **NAT 게이트웨이**: 프라이빗 서브넷의 인스턴스가 인터넷에 접속할 수 있도록 도와주는 게이트웨이예요

## 🌐 인터넷 게이트웨이 (Internet Gateway)
인터넷 게이트웨이는 VPC와 인터넷 간의 통신을 가능하게 해주는 구성 요소예요.<br />
퍼블릭 서브넷의 리소스가 인터넷과 통신할 수 있도록 해주는 핵심 구성 요소죠.

### 0️⃣ 인터넷 게이트웨이의 역할
인터넷 게이트웨이를 통해 퍼블릭 서브넷에 있는 EC2 인스턴스들이 인터넷에 직접 접근할 수 있어요.<br />
하나의 VPC에는 하나의 인터넷 게이트웨이만 연결할 수 있다는 점이 중요해요.<br />
- **양방향 통신 지원**: VPC 내의 퍼블릭 서브넷에 있는 리소스가 인터넷과 양방향으로 통신할 수 있도록 해줘요
- **고가용성 및 확장성**: AWS에서 관리되며, 자동으로 확장되어 대역폭 제한이 없어요

*[이미지 필요: 인터넷 게이트웨이 생성 및 VPC 연결 과정]*

### 1️⃣ 인터넷 게이트웨이 설정 방법
1. **인터넷 게이트웨이 생성**: AWS 콘솔에서 인터넷 게이트웨이를 생성해요
2. **VPC에 연결**: 생성한 인터넷 게이트웨이를 해당 VPC에 연결해요
3. **라우팅 테이블 업데이트**: 퍼블릭 서브넷의 라우팅 테이블에 인터넷 게이트웨이로의 경로를 추가해요
4. **보안 그룹 및 네트워크 ACL 설정**: 인스턴스의 보안 그룹과 네트워크 ACL에서 인바운드 및 아웃바운드 트래픽을 허용하도록 설정해요

### 2️⃣ 양방향 통신 지원
인터넷 게이트웨이는 아웃바운드(나가는)와 인바운드(들어오는) 트래픽을 모두 지원해요.<br />
이를 통해 웹 서버나 API 서버 같은 공개적으로 접근 가능한 서비스를 운영할 수 있어요.<br />
퍼블릭 IP 주소나 탄력적 IP 주소를 가진 인스턴스만 인터넷 게이트웨이를 통해 인터넷과 통신할 수 있어요.

## 🔄 NAT 게이트웨이 (Network Address Translation Gateway)
NAT 게이트웨이는 프라이빗 서브넷의 인스턴스가 인터넷에 아웃바운드 트래픽을 보낼 수 있도록 하면서, 외부에서의 인바운드 트래픽은 차단하는 역할을 해요.<br />
프라이빗 서브넷의 보안을 유지하면서도 필요한 인터넷 접근을 가능하게 하는 중요한 구성 요소예요.

### 0️⃣ NAT 게이트웨이의 역할
- **아웃바운드 인터넷 접속 지원**: 프라이빗 서브넷의 인스턴스가 인터넷으로 나가는 트래픽을 허용해요
- **인바운드 트래픽 차단**: 외부에서 프라이빗 서브넷의 인스턴스로의 직접적인 접속은 차단해요<br />
프라이빗 서브넷의 인스턴스들이 소프트웨어 업데이트, 패키지 다운로드, 외부 API 호출 등을 할 수 있지만, 외부에서 직접 접근할 수는 없게 해줘요.<br />
이는 보안상 매우 중요한 기능이에요.

*[이미지 필요: NAT 게이트웨이 생성 과정과 퍼블릭 서브넷 배치]*

### 1️⃣ NAT 게이트웨이의 종류
- **퍼블릭 NAT 게이트웨이**: 퍼블릭 서브넷에 위치하며, 프라이빗 서브넷의 인스턴스가 인터넷에 접속할 수 있도록 해줘요
- **프라이빗 NAT 게이트웨이**: 프라이빗 서브넷에 위치하며, 다른 VPC나 온프레미스 네트워크와의 통신을 지원해요<br />
일반적으로 퍼블릭 NAT 게이트웨이를 많이 사용해요.

### 2️⃣ NAT 게이트웨이 vs NAT 인스턴스
- **NAT 게이트웨이**: AWS에서 완전 관리하는 서비스로 고가용성과 자동 확장 제공<br />
  관리 부담이 적고 안정적이지만 비용이 상대적으로 높아요
- **NAT 인스턴스**: 사용자가 직접 관리하는 EC2 인스턴스로 더 많은 제어권 제공하지만 관리 부담 증가<br />
  비용을 절약할 수 있지만 고가용성을 직접 구현해야 해요

### 3️⃣ NAT 게이트웨이 설정 방법
1. **NAT 게이트웨이 생성**: AWS 콘솔에서 NAT 게이트웨이를 생성해요
2. **서브넷 선택**: 퍼블릭 NAT 게이트웨이의 경우 퍼블릭 서브넷을, 프라이빗 NAT 게이트웨이의 경우 프라이빗 서브넷을 선택해요
3. **탄력적 IP 주소 할당**: 퍼블릭 NAT 게이트웨이의 경우 탄력적 IP 주소를 할당해요
4. **라우팅 테이블 업데이트**: 프라이빗 서브넷의 라우팅 테이블에 NAT 게이트웨이로의 경로를 추가해요

## 🗂️ 서브넷 (Subnet)
서브넷은 VPC 내에서 IP 주소 범위를 나누어 생성된 네트워크 세그먼트예요.<br />
각 서브넷은 특정 가용 영역(AZ)에 속하며, 용도에 따라 퍼블릭과 프라이빗으로 구분해요.

### 0️⃣ 서브넷의 종류
- **퍼블릭 서브넷**: 인터넷 게이트웨이를 통해 인터넷과 통신할 수 있는 서브넷이에요
- **프라이빗 서브넷**: 인터넷과 직접 통신할 수 없으며, NAT 게이트웨이를 통해 아웃바운드 트래픽만 허용되는 서브넷이에요

### 1️⃣ 퍼블릭 서브넷
퍼블릭 서브넷은 인터넷 게이트웨이를 통해 인터넷에 직접 접근할 수 있는 서브넷이에요.<br />
주로 웹 서버, 로드 밸런서, NAT 게이트웨이 등을 배치해요.<br />
퍼블릭 서브넷의 인스턴스는 퍼블릭 IP 주소나 탄력적 IP 주소를 가져야 인터넷과 통신할 수 있어요.

*[이미지 필요: 퍼블릭 서브넷 생성 과정과 라우팅 테이블 연결]*

### 2️⃣ 프라이빗 서브넷
프라이빗 서브넷은 인터넷에 직접 접근할 수 없는 서브넷이에요.<br />
데이터베이스, 애플리케이션 서버 등 보안이 중요한 리소스들을 배치해요.<br />
NAT 게이트웨이를 통해서만 인터넷으로 아웃바운드 연결이 가능해요.

### 3️⃣ 서브넷 설정 시 고려사항
- **가용 영역(AZ)**: 서브넷은 특정 가용 영역에 속하며, 고가용성을 위해 여러 가용 영역에 서브넷을 분산시키는 것이 좋아요
- **IP 주소 범위**: 각 서브넷에 할당할 IP 주소 범위를 계획하여 충돌이 없도록 해야 해요<br />
- **CIDR 블록 계획**: 향후 확장을 고려하여 충분한 IP 주소 공간을 확보해요
- **용도별 분리**: 티어별로 서브넷을 분리하여 보안과 관리 효율성을 높여요

*[이미지 필요: 서브넷 구조도 - 퍼블릭/프라이빗 서브넷 구분과 AZ 배치]*

## 🛤️ 라우팅 테이블 (Routing Table)
라우팅 테이블은 네트워크 트래픽의 경로를 정의하는 테이블예요.<br />
VPC 내에서 트래픽의 흐름을 제어하는 핵심 구성 요소죠.

### 0️⃣ 라우팅 테이블의 역할
- **트래픽 경로 지정**: 서브넷에서 나가는 트래픽이 어떤 경로로 전달될지 결정해요
- **다양한 대상 지정**: 인터넷 게이트웨이, NAT 게이트웨이, 다른 서브넷 등 다양한 대상을 지정할 수 있어요<br />
각 라우팅 테이블은 목적지(Destination)와 대상(Target)의 쌍으로 구성된 라우팅 규칙들을 포함해요.<br />
예를 들어, `0.0.0.0/0`(모든 인터넷 트래픽)을 인터넷 게이트웨이로 라우팅하는 규칙이 있어요.

*[이미지 필요: 라우팅 테이블 설정 화면과 규칙 추가 과정]*

### 1️⃣ 라우팅 테이블 설정 방법
1. **라우팅 테이블 생성**: AWS 콘솔에서 라우팅 테이블을 생성해요
2. **서브넷 연결**: 생성한 라우팅 테이블을 특정 서브넷과 연결해요
3. **경로 추가**: 필요한 경로를 라우팅 테이블에 추가해요<br />
   예를 들어, 인터넷 게이트웨이로의 경로를 추가하려면 대상 주소를 `0.0.0.0/0`으로 설정하고 대상 게이트웨이를 인터넷 게이트웨이로 지정해요

### 2️⃣ 라우팅 규칙 설정
- **로컬 트래픽**: VPC 내부 통신을 위한 로컬 라우팅 (자동 생성)
- **인터넷 트래픽**: `0.0.0.0/0`을 인터넷 게이트웨이 또는 NAT 게이트웨이로 라우팅
- **특정 네트워크**: 특정 IP 대역을 특정 대상으로 라우팅<br />
라우팅 테이블에는 여러 경로를 추가할 수 있으며, 가장 구체적인 경로가 우선 적용돼요.

### 3️⃣ 서브넷별 라우팅 전략
- **퍼블릭 서브넷**: 인터넷 게이트웨이로의 라우팅 규칙 포함
- **프라이빗 서브넷**: NAT 게이트웨이로의 라우팅 규칙 포함
- **DB 서브넷**: 외부 인터넷 접근이 필요 없는 경우 NAT 게이트웨이 라우팅도 제외<br />
각 서브넷의 용도에 맞게 라우팅 테이블을 설정하여 보안과 네트워크 효율성을 높일 수 있어요.

*[이미지 필요: 서브넷별 라우팅 테이블 차이점 비교]*

## 🛡️ 베스천 호스트 (Bastion Host)
베스천 호스트는 외부에서 프라이빗 서브넷의 인스턴스에 안전하게 접속하기 위한 중간 서버예요.<br />
마치 성의 출입문 같은 역할을 한다고 생각하시면 돼요.

### 0️⃣ 베스천 호스트의 역할
- **보안 강화**: 프라이빗 서브넷의 인스턴스에 직접 접근하지 않고, 베스천 호스트를 통해서만 접근함으로써 보안을 강화해요
- **접근 제어**: 베스천 호스트에 대한 접근을 제한하여, 특정 IP 주소나 사용자만 접근할 수 있도록 설정할 수 있어요<br />
외부에서 프라이빗 서브넷의 서버들에 직접 접근할 수 없으므로, 퍼블릭 서브넷에 위치한 베스천 호스트를 경유하여 접근해요.<br />
이를 통해 보안을 강화하면서도 필요한 관리 작업을 수행할 수 있어요.

*[이미지 필요: 베스천 호스트를 통한 접근 구조도]*

### 1️⃣ 베스천 호스트 설정 방법
1. **퍼블릭 서브넷에 인스턴스 생성**: 퍼블릭 서브넷에 베스천 호스트로 사용할 인스턴스를 생성해요
2. **보안 그룹 설정**: 베스천 호스트의 보안 그룹에서 SSH(22번 포트) 접근을 허용해요
3. **프라이빗 서브넷 인스턴스의 보안 그룹 설정**: 프라이빗 서브넷의 인스턴스 보안 그룹에서 베스천 호스트의 IP 주소만 SSH 접근을 허용해요
4. **SSH 에이전트 포워딩 사용**: 로컬 머신에서 베스천 호스트로 SSH 접속한 후, SSH 에이전트 포워딩을 통해 프라이빗 인스턴스에 접속해요

### 2️⃣ 베스천 호스트 모범 사례
- **최소 권한 원칙**: 필요한 최소한의 권한만 부여
- **정기적인 업데이트**: 보안 패치를 정기적으로 적용
- **접근 제한**: 특정 IP 또는 VPN을 통해서만 접근 허용
- **모니터링**: 접근 로그와 활동을 지속적으로 모니터링<br />
- **키 페어 관리**: 안전한 SSH 키를 사용하여 접근 제어
- **접근 로그 관리**: 접근 기록을 모니터링하고 감사 추적 가능하도록 설정

*[이미지 필요: 베스천 호스트 보안 그룹 설정과 SSH 접근 과정]*

### 3️⃣ 베스천 호스트 접근 흐름
1. **외부 → 베스천 호스트**: 관리자가 인터넷을 통해 베스천 호스트에 SSH 접속
2. **베스천 호스트 → 프라이빗 서버**: 베스천 호스트에서 프라이빗 서브넷의 서버로 SSH 접속
3. **관리 작업 수행**: 프라이빗 서버에서 필요한 관리 작업 실행<br />
이러한 접근 방식을 통해 프라이빗 서브넷의 보안을 유지하면서도 필요한 관리 작업을 안전하게 수행할 수 있어요.

## 🏗️ 전체 아키텍처 통합 이해
이 모든 구성 요소들이 함께 작동하여 안전하고 효율적인 클라우드 네트워크 환경을 만들어요.<br />
각 구성 요소의 역할과 상호작용을 이해하는 것이 중요해요.

### 0️⃣ 일반적인 3-Tier 아키텍처
- **Web Tier (퍼블릭 서브넷)**: 로드 밸런서, 웹 서버<br />
  사용자의 요청을 받아 처리하는 계층이에요
- **Application Tier (프라이빗 서브넷)**: 애플리케이션 서버, API 서버<br />
  비즈니스 로직을 처리하는 계층이에요
- **Database Tier (프라이빗 서브넷)**: 데이터베이스 서버<br />
  데이터를 저장하고 관리하는 계층이에요

*[이미지 필요: 전체 아키텍처 구성도 - 모든 구성 요소가 포함된 완전한 네트워크 다이어그램]*

### 1️⃣ 트래픽 흐름 예시
1. **인터넷 → 웹 서버**: 사용자 요청이 인터넷 게이트웨이를 통해 퍼블릭 서브넷의 웹 서버로 전달
2. **웹 서버 → 앱 서버**: 웹 서버가 프라이빗 서브넷의 애플리케이션 서버와 통신
3. **앱 서버 → DB**: 애플리케이션 서버가 데이터베이스 서버와 통신
4. **프라이빗 → 인터넷**: NAT 게이트웨이를 통해 프라이빗 서브넷에서 인터넷으로 아웃바운드 접속<br />
이러한 흐름을 통해 보안을 유지하면서도 필요한 서비스를 제공할 수 있어요.

### 2️⃣ 네트워크 설계 시 고려사항
- **고가용성**: 여러 AZ에 리소스 분산 배치하여 장애 시에도 서비스 지속성 확보
- **보안**: 최소 권한 원칙과 네트워크 분리를 통한 보안 강화
- **확장성**: 향후 성장을 고려한 IP 대역 설계와 유연한 아키텍처 구성
- **비용 최적화**: NAT 게이트웨이와 데이터 전송 비용을 고려한 효율적인 설계<br />
- **성능**: 네트워크 지연시간을 최소화하는 구성
- **관리 용이성**: 운영과 관리가 편리한 구조 설계

### 3️⃣ 구성 요소 간 상호작용
- **VPC**: 모든 구성 요소를 포함하는 논리적 네트워크 경계
- **서브넷**: VPC 내에서 리소스를 논리적으로 분리하는 단위
- **인터넷 게이트웨이**: 퍼블릭 서브넷과 인터넷 간의 연결점
- **NAT 게이트웨이**: 프라이빗 서브넷의 아웃바운드 인터넷 접속 지원
- **라우팅 테이블**: 트래픽의 경로를 결정하는 규칙 집합
- **베스천 호스트**: 프라이빗 리소스에 대한 안전한 접근 경로<br />

이러한 AWS 네트워크 구성 요소들을 제대로 이해하고 설계하면, 안전하고 확장 가능한 클라우드 인프라를 구축할 수 있어요.<br />
각 구성 요소의 역할과 상호작용을 명확히 파악하여 요구사항에 맞는 최적의 네트워크 아키텍처를 설계해보세요!
